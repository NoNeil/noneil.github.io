---
title: Keras安装（CPU版）（macOS 10.13.4）
description: 介绍了在macOS上使用Miniconda安装Keras、TensorFlow
categories: Keras
tags:
  - Miniconda
  - Keras
  - TensorFlow
date: 2018-04-22 14:15:53
updated: 2018-04-22 14:15:53
---


# 安装Miniconda
在清华镜像站下载Miniconda安装包，
地址：https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/

我下载的最新版：Miniconda3-latest-MacOSX-x86_64.sh
``` shell
$ cd ~/Download
$ chmod +x Miniconda3-latest-MacOSX-x86_64.sh
$ ./Miniconda3-latest-MacOSX-x86_64.sh
```
根据提示进行安装即可，该脚本会自动将`/Users/Neil/miniconda3/bin`目录添加到环境变量中。
```shell
$ cat ~/.bash_profile
# added by Miniconda3 installer
export PATH="/Users/Neil/miniconda3/bin:$PATH"

# 使环境变量生效
$ source ~/.bash_profile
```

**注意：**
如果安装了zsh，上述添加环境变量的操作只会临时生效.
当新建shell窗口时，还是需要手动执行`source ~/.bash_profile`.

解决方法：[Stackoverflow](https://stackoverflow.com/questions/15733508/why-do-i-need-to-source-bash-profile-every-time)
> 1. Run ps -p $$ at the command line to determine that you are, in fact, using a bash shell.
> 2. Realize that you are in zsh, which means you should be editing your profile in .zshrc.
> 3. Copy the offending lines from .bash_profile to .zsh
```shell
# 1. 确定运行的是bash shell还是zsh shell
$ ps -p $$
  PID TTY           TIME CMD
 1365 ttys007    0:00.39 -zsh
# 2. 编辑.zshrc
$ vim ~/.zshrc
# 3. 将/Users/Neil/miniconda3/bin添加到PATH中
$ tail -n 2 ~/.zshrc
# added by Miniconda3 installer
export PATH="/Users/Neil/miniconda3/bin:$PATH"
```

# 安装keras
```shell
$ pip install keras
```
keras默认的深度学习包是TensorFlow，如果要修改成Theano，编辑`~/.keras/keras.json`
```shell
$ cat ~/.keras/keras.json
{
    "image_data_format": "channels_last",
    "floatx": "float32",
    "epsilon": 1e-07,
    "backend": "tensorflow"
}%
```

# 安装TensorFlow
```shell
$ pip install tensorflow
```

# 验证是否安装成功
```shell
➜  bin python
Python 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 12:04:33)
[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import keras
Using TensorFlow backend.
>>> print (keras.__version__)
2.1.5
>>> import tensorflow as tf
>>> print (tf.__version__)
1.7.0
>>>
```

# 下载Keras example
```shell
$ git clone https://github.com/fchollet/keras.git
$ cd keras/examples/
$ python mnist_mlp.py
```

附Keras中文文档：[http://keras-cn.readthedocs.io/en/latest/](http://keras-cn.readthedocs.io/en/latest/)
