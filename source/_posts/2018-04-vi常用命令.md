---
title: vi常用命令
description: vi常用命令：复制、粘贴、撤销、搜索、跳转等。附Word版下载。
categories: Linux
tags:
  - vi
  - vim
date: 2018-04-02 10:59:26
updated: 2018-04-02 10:59:26
---

<!--
vi有3个模式：插入模式、命令模式、低行模式。
- 插入模式：在此模式下可以输入字符，按ESC将回到命令模式。
- 命令模式：可以移动光标、删除字符等。
- 低行模式：可以保存文件、退出vi、设置vi、查找等功能(低行模式也可以看作是命令模式里的)。

# 打开文件、保存、关闭文件(vi命令模式下使用)

**vi filename**     // 打开filename文件
**:w**              // 保存文件
**:w filename**     // 保存至filename文件
**:q**              // 退出编辑器，如果文件已修改请使用下面的命令
**:q!**             // 退出编辑器，且不保存
**:wq**             // 退出编辑器，且保存文件

# 插入文本或行

(vi命令模式下使用，执行下面命令后将进入插入模式，按ESC键可退出插入模式)

**a**       // 在当前光标位置的 **右边** 添加文本
**i**       // 在当前光标位置的 **左边** 添加文本
**A**       // 在当前行的 **行尾** 添加文本
**I**       // 在当前行的 **行尾** 添加文本(非空字符的行首)
**O**       // 在当前行的 **上面新建一行**
**o**       // 在当前行的 **下面新建一行**
**R**       // 替换(覆盖)当前光标位置及后面的若干文本
**J**       // 合并光标所在行及下一行为一行

# 移动光标(vi命令模式下使用)

1、使用上下左右方向键

2、命令模式下：
* h（向左）、j（向下）、k（向上）、l（向右）
* 空格键（向右）、Backspace（向左）、Enter（移动到下一行首）、-（移动到上一行首）

# 删除、恢复字符或行(vi命令模式下使用)

**x**       // 删除当前字符
**nx**      // 删除从光标开始的n个字符
**dd**      // **删除当前行**
**ndd**     // 向下删除当前行在内的n行
**u**       // **【撤销】** 撤销上一步操作
**U**       // 撤销对当前行的所有操作

# 搜索(vi命令模式下使用)

**/vpser**  // 向光标下搜索vpser字符串
**?vpser**  // 向光标上搜索vpser字符串
**n**       // 向下搜索**前一个搜素动作**
**N**       // 向上搜索前一个搜索动作

# 跳至指定行(vi命令模式下使用)

**n+**      // 向下跳n行
**n-**      // 向上跳n行
**nG**      // **跳到行号为n的行**
**G**       // **跳至文件的底部**

# 设置行号(vi命令模式下使用)

**:set nu**     // **显示行号**
**:set nonu**   // 取消显示行号

# 复制、粘贴(vi命令模式下使用)

**yy**  // **【复制】** 将当前行复制到缓存区，也可以用“ayy” 复制，”a”为缓冲区，”a”也可以替换为a到z的任意字母，可以完成多个复制任务。
**nyy** // 将当前行向下n行复制到缓冲区，也可以用 ”anyy”复制，”a”为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
**yw**  // 复制从光标开始到词尾的字符。
**nyw** // 复制从光标开始的n个单词。
**y^**  // 复制从光标到行首的内容。
**y$**  // 复制从光标到行尾的内容。
**p**   // **【粘贴】** 粘贴剪切板里的内容在光标后，如果使用了前面的自定义缓冲区，建议使用”ap”进行粘贴。
**P**   // 粘贴剪切板里的内容在光标前，如果使用了前面的自定义缓冲区，建议使用”aP”进行粘贴。

# 替换(vi命令模式下使用)

**:s/old/new**      // 用new替换行中首次出现的old
**:s/old/new/g**    // 用new替换行中所有的old
**:n,m s/old/new/g**    // 用new替换从n到m行里所有的old
**:%s/old/new/g**   // 用new替换当前文件里所有的old

# 编辑其他文件

**:e otherfilename**    // 编辑文件名为otherfilename的文件

# 修改文件格式

**:set fileformat=unix**    // 将文件修改为unix格式，如win下面的文本文件在linux下会出现^M。

**Tips：**

- 当不知道自己处在什么模式时可以按2次Esc键即可回到命令模式。


**附Word版，方便下载打印出来。** 点此下载：[Vi常用命令.docx](./Vi常用命令.docx)


本文转载自：VPS侦探 本文链接地址：[https://www.vpser.net/manage/vi.html](https://www.vpser.net/manage/vi.html)
-->

## 配置

vim ~/.vimrc

|||
|:--|:--|
自动缩进        |   set smartindent
显示行号        |   set number 或 set nu
不显示行号      |   set nonu
ctags跨目录索引 |   set tags=./tags;/

## 多窗口编辑

|||
|:--|:--|
vim -o file1 file2  |   上下两个窗口
vim -O file1 file2  |   左右两个窗口
:split              |   上下两个窗口
:vsplit  (C+w v)    |   左右两个窗口
Ctrl + w w          |   窗口间循环切换
:e newfile          |   在该窗口打开新的文件
:set scrollbind     |   多个窗口同时滑动
:n                  |   切换到下一个文件
:N                  |   切换到上一个文件
:vertical resize +5 |   窗口宽度+5
:vertical resize -5 |   窗口宽度-5

## 翻页

|||
|:--|:--|
Ctrl + f    |     屏幕『向下』移动一页
Ctrl + b    |     屏幕『向上』移动一页
Ctrl + d    |     屏幕『向下』移动半页
Ctrl + u    |     屏幕『向上』移动半页
Ctrl + e    |     逐行下滚
Ctrl + y    |     逐行上滚
H           |     光标移动到屏幕首行
L           |     光标移动到屏幕尾行
M           |     光标移动到屏幕中间

## 行首、行尾

|||
|:--|:--|
0   |   行首
$   |   行尾
gg  |   文件首行 
G   |   文件尾行

## 移动

|||
|:--|:--|
h j k l |   左、下、上、右
w       |   到下一个单词的开头
e       |   到下一个单词的结尾
b       |   移动光标到上一个单词的词首

## 跳至指定行(vi命令模式下使用)

n+      |   向下跳n行
n-      |   向上跳n行
nG      |   跳到行号为n的行
G       |   跳至文件的底部

## 复制 & 剪切 & 粘贴

|||
|:--|:--|
y       |   复制
yaw     |   复制当前单词
yy      |   复制当前行
^y%     |   复制当前行
5yy     |   复制从当前行开始 5 行
dd      |   剪切
5dd     |   剪切 5 行
d$ / dD |   删除到行尾
d0 / d^ |   删除到行首
p       |   粘贴，在光标后面
P       |   粘贴，在光标上面

## 替换单词

1.光标移动到aaa的开头，按 v 按e 按y
2.光标移动到bbb的开头，按 v 按e 按p

## 删除

|||
|:--|:--|
x       |   删除当前字符
dd      |   删除一行
5dd     |   删除 5 行
dw      |   删除当前单词
ved     |   删除一个单词
d$ / dD |   删除到行尾
d0 / d^ |   删除到行首

## 搜索 & 替换

|||
|:--|:--|
/xx     |   查找某个单词xx
/foo\c  |   大小写不敏感的查找
/foo\C  |   大小写敏感的查找
|   *   |   **查找光标所在单词**
n       |   查找下一个
N       |   查找上一个
C-o     |   返回上一个光标位置
C-i     |   跳到下一个光标位置。
?xx     |   反向查找
q/, q?  |   可以列出查找历史
替换     |   :{作用范围}s/{目标}/{替换}/{替换标志}
:%s/foo/bar     |   只替换从光标位置开始，目标的第一次出现
:%s/foo/bar/i   |   大小写不敏感
:%s/foo/bar/I   |   大小写不敏感
:s/foo/bar/g    |   作用范围：当前行
:%s/foo/bar/g   |   作用范围：全文
:'<,'>s/foo/bar/g|  作用范围：Visual模式下选择区域

## 撤销 & 恢复

|||
|:--|:--|
u           |   撤销
Ctrl + r    |   恢复
U           |   行撤销，撤销所有在前一个编辑行上的操作
